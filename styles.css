/* Charity: water Brand Colors & Fonts
Primary Colors:
- Yellow:     #FFC907
- Blue:       #2E9DF7
Secondary Colors:
- Light Blue: #8BD1CB
- Green:      #4FCB53
- Orange:     #FF902A
- Red:        #F5402C
- Dark Green: #159A48
- Pink:       #F16061

Fonts:
- Proxima Nova
- Avenir
*/

/* === Brand tokens === */
:root{
  --cw-yellow:#FFC907;
  --cw-blue:#2E9DF7;

  --cw-lightblue:#8BD1CB;
  --cw-green:#4FCB53;
  --cw-orange:#FF902A;
  --cw-red:#F5402C;
  --cw-darkgreen:#159A48;
  --cw-pink:#F16061;

  /* neutrals */
  --ink:#222;
  --paper:#FFF6E5;
  --muted:#dcdcdc;
}

*{box-sizing:border-box}
body{
  margin:0;
  display:grid;
  place-items:center;
  background:#f2f2f2;
  color:var(--ink);
  font-family:
    "Proxima Nova","Avenir Next",Avenir,
    system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
}

.phone{
  /* 기본: 모바일 */
  width:min(380px,92vw);
  height:760px;
  background:var(--paper);
  border-radius:18px;
  box-shadow:0 16px 40px rgba(0,0,0,.12);
  border:1px solid #e8e1d4;
  position:relative;
  overflow:hidden;
}

.top{display:flex;align-items:center;justify-content:space-between;padding:14px 16px}
.logo{height:28px;width:180px;background:#E2E8E0;border-radius:6px;display:grid;place-items:center;font-size:12px;color:#4b5563}

/* Reset button */
.resetBtn{
  background:var(--cw-yellow);
  border:none;border-radius:10px;
  padding:6px 12px;
  font-weight:800;
  cursor:pointer;
}

/* Score centered above bars */
.scoreCenter{font-weight:800;text-align:center;margin:12px 0 6px 0;font-size:20px}

/* Speed Up badge */
.boostBadge{
  text-align:center;
  font-weight:900;
  color:var(--cw-red);
  margin-bottom:8px;
  animation:pop 280ms ease;
}

/* Bars */
.bars{padding:6px 18px 0 18px;display:flex;flex-direction:column;gap:12px}
.bar{position:relative;height:18px;background:#fff;border:1px solid var(--muted);border-radius:999px;overflow:hidden}
.bar .label{position:absolute;inset:0;display:grid;place-items:center;color:#0b4a6e;font-weight:700;font-size:12px;pointer-events:none}
.fill{position:absolute;inset:0 auto 0 0;width:100%;background:linear-gradient(90deg,var(--cw-blue),#91d5ff)}

/* Dual water-quality bar with percentage labels */
.bar.-dual{position:relative}
.bar.-dual .fill-left{position:absolute;left:0;top:0;height:100%;width:0;background:linear-gradient(90deg,var(--cw-blue),#8bd2ff)}
.bar.-dual .fill-right{position:absolute;right:0;top:0;height:100%;width:0;background:linear-gradient(90deg,#b2866b,#8b6f5a)}
.bar.-dual .caps{position:absolute;inset:0;display:flex;justify-content:space-between;align-items:center;padding:0 6px;font-size:11px;color:#053b5e;font-weight:700}

/* Playfield & motion */
.play{position:absolute;inset:220px 0 92px 0;overflow:hidden}
.drop{position:absolute;top:-60px;display:block;width:48px;height:48px}
.drop.clean{--c:var(--cw-blue)}
.drop.dirty{--c:#8b6f5a}
.drop.obstacle{--c:var(--cw-red)} /* 빨간 장애물 */
.drop:before{content:"";position:absolute;inset:0;background:var(--c);border-radius:20px 20px 50% 50% / 30% 30% 70% 70%;transform:rotate(45deg)}
.drop:after{content:"";position:absolute;bottom:4px;left:50%;transform:translateX(-50%);width:80%;height:18px;border-radius:999px;background:rgba(255,255,255,.35)}

@keyframes fall {
  from { top: var(--start, -60px); }
  to   { top: calc(100% - var(--h)); } /* 드롭 높이만큼 보정하여 바닥에 '딱' 닿음 */
}

/* Jerry can (movable) */
.canWrap{position:absolute;bottom:16px;left:calc(50% - 75px);width:150px;transform:none;touch-action:none}
.can{width:150px;height:150px;position:relative;background:none;display:block}
.can img{display:block;width:100%;height:100%;object-fit:contain;user-drag:none;-webkit-user-drag:none;pointer-events:none;}

/* ===== Modals ===== */
.backdrop{position:absolute;inset:0;background:#00000099;display:none;align-items:center;justify-content:center}
.modal{width:88%;max-width:320px;background:var(--paper);border-radius:16px;box-shadow:0 20px 40px #00000040;border:1px solid #eee;text-align:center;overflow:hidden}
.modalHeader{background:var(--cw-yellow);padding:10px 14px;font-weight:900}
.modalBody{padding:18px}
.lineTop{font-size:14px;font-weight:700;color:#374151;margin:0 0 6px}
.bigNumber{font-size:40px;font-weight:900;color:#111;margin:0}
.lineBottom{font-size:14px;font-weight:700;color:#374151;margin:6px 0 10px}
.modalBody img{width:120px;height:auto;margin:6px auto 0;display:block}
.row{display:flex;gap:8px;justify-content:center;padding:0 0 16px}
.row button{background:var(--cw-yellow);border:none;border-radius:999px;padding:10px 16px;font-weight:800;cursor:pointer}
.row .ghost{background:#eaeaea;color:#222}

/* ===== Confetti ===== */
.confetti{
  position:absolute;
  top:-10px; left:0;
  font-size:20px; line-height:1;
  animation:confettiFall 1200ms linear forwards;
  pointer-events:none; user-select:none;
}
@keyframes confettiFall{
  to{ transform:translateY(110vh) rotate(360deg); opacity:0.9; }
}

/* ===== Animations ===== */
.can.hit{animation:boing 500ms cubic-bezier(.34,1.56,.64,1)}
@keyframes boing{0%{transform:translateZ(0) scale(1,1)}40%{transform:scale(1.15,.9)}70%{transform:scale(.96,1.08)}100%{transform:scale(1,1)}}

#qualityBar.shake{animation:shake 520ms cubic-bezier(.36,.07,.19,.97)}
@keyframes shake{10%,90%{transform:translateX(-1px)}20%,80%{transform:translateX(2px)}30%,50%,70%{transform:translateX(-4px)}40%,60%{transform:translateX(4px)}}

.scoreCenter.pop{animation:pop 280ms ease}
@keyframes pop{0%{transform:scale(1)}50%{transform:scale(1.12)}100%{transform:scale(1)}}

/* subtle red flash on dirty/obstacle */
#qualityBar.flash::after{content:"";position:absolute;inset:0;border-radius:999px;box-shadow:0 0 0 4px rgba(200,80,60,.25) inset;animation:flash 420ms ease forwards}
@keyframes flash{from{opacity:1} to{opacity:0}}

/* =========================
   Responsive overrides
   ========================= */

/* on the tablet */
@media (min-width: 768px){
  .phone{ width:420px; height:840px; }
  .canWrap{ width:170px; left:calc(50% - 85px); bottom:18px; }
  .can{ width:170px; height:170px; }
}

/* on desktop — 와이드 레이아웃 */
@media (min-width: 1200px){
  /* 가로로 넓게, 세로는 살짝 낮게 */
  .phone{
    width:min(960px, 92vw);
    height:600px;
  }

  /* 상단/HUD 여백 미세 조정 */
  .scoreCenter{ margin:16px 0 8px; }
  .bars{ padding:6px 24px 0 24px; }

  /* 플레이 구역을 좌우로 넓히고 상하 여백 조정 */
  .play{
    inset: 200px 0 110px 0;  /* top right bottom left */
  }

  /* 제리캔 크기 확대 */
  .canWrap{
    width:200px;
    left:calc(50% - 100px);
    bottom:22px;
  }
  .can{ width:200px; height:200px; }
}
/* 초와이드(가로 긴) 화면에서만 제리캔 살짝 축소 */
@media (min-width: 1200px) and (orientation: landscape) and (min-aspect-ratio: 16/9){
  .canWrap{
    width: 133px;                 /* 기존 200px → 133px */
    left:calc(50% - 66.5px);
    bottom:22px;
  }
  .can{ width:133px; height:133px; }
}
/* === Jerrycan size controller (desktop default = big) === */
:root{
  --can-size-desktop: 200px;   /* 세로(또는 좁은 비율)에서 사용할 기본 큰 사이즈 */
  --can-size-wide:    133px;   /* 가로로 넓을 때 유지할 작은 사이즈 (≈ 2/3) */
  --can-size: var(--can-size-desktop);
}

/* 데스크탑 기본 레이아웃에서 can 크기 변수 적용 */
@media (min-width: 1200px){
  .canWrap{
    width: var(--can-size);
    left: calc(50% - (var(--can-size) / 2));
    bottom: 22px;
  }
  .can{
    width: var(--can-size);
    height: var(--can-size);
  }
}

/* 가로로 넓은 화면(landscape)에서는 끝까지 세로로 바뀌기 전까지 작은 크기 유지 */
@media (min-width: 1200px) and (orientation: landscape){
  :root{ --can-size: var(--can-size-wide); }
}

/* 세로(portrait)로 바뀌면 다시 큰 크기로 복귀 */
@media (min-width: 1200px) and (orientation: portrait){
  :root{ --can-size: var(--can-size-desktop); }
}

/* (선택) 화면 비율이 넓지 않은 경우(거의 정사각형/세로 느낌)도 큰 크기로 복귀 */
@media (min-width: 1200px) and (max-aspect-ratio: 10/9){
  :root{ --can-size: var(--can-size-desktop); }
}
/* 1200~1268px 구간에서도 캔을 작게 고정 */
@media (min-width: 1200px) and (max-width: 1268px){
  .canWrap{
    width:133px;
    left:calc(50% - 66.5px);
    bottom:22px;
  }
  .can{ width:133px; height:133px; }
}
